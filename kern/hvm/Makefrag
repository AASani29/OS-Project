# -*-Makefile-*-

OBJDIRS += kern/hvm/

KERN_SRCFILES	+= kern//hvm/vmm.c
KERN_SRCFILES	+= kern/hvm/vmm_iodev.c

# How to build kernel object files
$(OBJDIR)/kern/hvm/%.o: kern/hvm/%.c
	@echo + cc $<
	@mkdir -p $(@D)
	$(V)$(CC) -nostdinc $(KERN_CFLAGS) -c -o $@ $<

$(OBJDIR)/kern/hvm/%.o: kern/hvm/%.S
	@echo + as $<
	@mkdir -p $(@D)
	$(V)$(CC) -nostdinc $(KERN_CFLAGS) -c -o $@ $<

include kern/hvm/svm/Makefrag
include kern/hvm/vmx/Makefrag
include kern/hvm/dev/Makefrag
